# Исправления стратегии размещения растений

## Проблемы, которые были исправлены:

### 1. Подсолнухи в первой колонке
**Проблема**: Подсолнухи размещались неправильно или не в первой колонке
**Решение**: 
- Уточнен порядок рядов для первых 3 подсолнухов: [2, 1, 3] (средние ряды)
- Добавлена проверка что подсолнухи сажаются только в колонку 0
- Добавлено логирование для отладки

### 2. Расширение колонок для горохострелов
**Проблема**: Горохострелы сажались только в колонках 1-5 и не переходили к следующим колонкам
**Решение**:
- Добавлен метод `_get_available_peashooter_columns()` который динамически определяет доступные колонки
- Логика расширения: 1-5 → 6-7 → 8
- Обновлены методы `_plan_targeted_offense()` и `_plan_proactive_defense()` для использования динамических колонок

### 3. Улучшенное отслеживание состояния
**Проблема**: Недостаточно информации о заполненности колонок и состоянии игры
**Решение**:
- Добавлен счетчик `peashooters_per_column` для отслеживания количества горохострелов в каждой колонке
- Обновлен метод `print_grid_state()` с показом доступных колонок и заполненности
- Добавлено подробное логирование действий

## Новые настройки в config.py:

```python
PEASHOOTER_COLS = [1, 2, 3, 4, 5]  # Columns 1-5 (initial)
PEASHOOTER_COLS_EXTENDED = [6, 7]  # Columns 6-7 (when 1-5 are full)
PEASHOOTER_COLS_FINAL = [8]  # Column 8 (when 1-7 are full)
```

## Как это работает теперь:

1. **Начальная фаза**: Сажаем 3 подсолнуха в колонке 0 (ряды 2,1,3)
2. **Начало защиты**: Сразу после подсолнухов начинаем сажать горохострелы
3. **Заполнение колонок**: 
   - Сначала заполняем колонки 1-5 в рядах 2,3,4
   - Когда 1-5 заполнены, переходим к колонкам 6-7
   - Когда 6-7 заполнены, используем колонку 8
4. **Приоритеты**: Ряды с зомби имеют приоритет, но проактивная защита работает параллельно

## Тестирование:

Запустите `python3 test_strategy.py` чтобы проверить новую логику:
- ✅ Проверка расширения колонок
- ✅ Проверка размещения подсолнухов
- ✅ Визуализация состояния поля
